<%= render partial: "ajion2596dhi/shared/head" %>

<div class="container text-right">
  <%= paginate @items, outer_windows: 3 %>
</div>

<div class="container">
  <div class="row">
    <div>
      <%= link_to 'New Man Product', new_man_ajion2596dhi_items_path, class: "btn btn-primary" %>

      <%= link_to 'New Woman Product', new_woman_ajion2596dhi_items_path, class: "btn btn-primary" %>

      <%= link_to 'New Kid Product', new_kid_ajion2596dhi_items_path, class: "btn btn-primary" %>

      <%= link_to 'New Baby Product', new_baby_ajion2596dhi_items_path, class: "btn btn-primary" %>
    </div>
    
    <br>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>#</th>
          <th>name</th>
          <th>sex</th>
          <th>category</th>
          <th>image</th>
          <th>intro</th>
          <th>price</th>
          <th>color</th>
          <th>size</th>
          <th>stock</th>
          <th>#</th>
        </tr>
      </thead>

      <tbody id="item-index">
        <% @items.each do |item| %>
        <tr id="<%= item.id %>">
          <th scope="row"><%= item.id %></th>
          <td><%= item.name %></td>
          <td><%= item.category.who %></td>
          <td><%= item.category.name %></td>
          <td><%= image_tag item.main_image, width: "30px" %></td>
          <td><%= item.intro %></td>
          <td><%= item.price %></td>
          <td>
            <% item.products.pluck(:color).uniq.each do |color| %>
              <div class="colorbox" style="float: left; background-color: #<%= color %>;"></div>
            <% end %>
          </td>
          <td>
            <% item.products.pluck(:size).uniq.each do |size| %>
              <%= size %>
            <% end %>
          </td>
          <td>
            <%= item.products.pluck(:stock).map(&:to_i).inject(:+) %>
          </td>
          <td>
            <%= link_to "show", ajion2596dhi_item_path(item) %>
            <%= link_to "edit", edit_ajion2596dhi_item_path(item) %>
            <%= link_to 'Delete', ajion2596dhi_item_path(item), method: :delete, data:{confirm: "Are you sure?"} %>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>

  </div>
</div>

<div class="text-center">
  <%= paginate @items, outer_windows: 3 %>
</div>
